<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>出荷検査成績書作成</title>
  <style>
    :root{
      --bg:#f7f8fb; --card:#ffffff; --text:#1f2a44; --muted:#6b7280; --border:#e5e7eb;
      --accent:#2563eb; --accent-weak:#eff6ff; --shadow:0 10px 30px rgba(15,23,42,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .container{max-width:1080px;margin:0 auto;padding:24px}
    /* header */
    .header{display:flex;align-items:center;justify-content:space-between}
    .brand{font-weight:700;letter-spacing:.3px}
    .nav a{color:var(--muted);text-decoration:none;margin-left:14px}
    .nav a:hover{color:var(--text)}
    /* cards */
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
    .title{margin:0 0 10px 0}
    /* controls */
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .input{padding:9px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text);min-width:240px}
    .btn{padding:9px 12px;border-radius:10px;border:1px solid var(--border);background:#fff;color:var(--text);cursor:pointer}
    .btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
    .btn.ghost{background:transparent}
    .msg{color:#dc2626}
    .muted{color:var(--muted)}
    .hidden{display:none}
    /* folder list */
    .folder{border:1px solid var(--border);border-radius:14px;margin-top:12px;overflow:hidden;background:#fff}
    .folder-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;cursor:pointer;background:linear-gradient(180deg,#fff,#fafafa)}
    .folder-head:hover{background:linear-gradient(180deg,#fff,#f5f5f5)}
    .folder-title{display:flex;align-items:center;gap:10px;font-weight:600}
    .folder-badge{font-size:.85rem;background:var(--accent-weak);color:var(--accent);padding:2px 8px;border-radius:999px;border:1px solid #dbeafe}
    .folder-body{padding:12px 14px;border-top:1px solid var(--border)}
    .subgrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
    .subfolder{border:1px solid var(--border);border-radius:12px}
    .subfolder-head{padding:10px 12px;font-weight:600;background:#fafafa;border-bottom:1px solid var(--border)}
    .links{display:flex;flex-direction:column;padding:10px}
    .link{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border:1px solid var(--border);border-radius:10px;text-decoration:none;color:var(--text);margin-bottom:8px;background:#fff}
    .link:hover{border-color:#cbd5e1;background:#f8fafc}
    .tag{font-size:.8rem;color:var(--muted)}
    /* icons */
    .ico{width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center}
    .caret{transition:.2s transform ease}
    .rot{transform:rotate(90deg)}
    /* footer */
    .footer{color:var(--muted);text-align:center;padding:30px 0}
  </style>
</head>
<body>
  <header class="container header">
    <div class="brand">品質管理生産技術</div>
    <nav class="nav">
      <a href="./index.html">ホーム</a>
      <a href="./forms.html"><strong>出荷検査成績書</strong></a>
    </nav>
  </header>

  <main class="container">
    <section class="card">
      <h1 class="title">出荷検査成績書</h1>
      <p class="muted">フォルダを開いて対象のフォームを選択してください。</p>

      <!-- ロック（必要なければこのブロックを丸ごと削除OK） -->
      <div id="lock" class="row" style="margin-top:6px">
        <input id="pwd" class="input" type="password" placeholder="パスワード">
        <button id="unlock" class="btn primary">確定</button>
        <div id="msg" class="msg"></div>
      </div>

      <!-- 操作バー -->
      <div class="row" style="margin-top:14px">
        <input id="search" class="input" type="search" placeholder="検索（顧客名・軸・機種名）">
        <button id="expandAll" class="btn">すべて展開</button>
        <button id="collapseAll" class="btn ghost">すべて閉じる</button>
        <span class="muted">※ パスワード解除後に表示されます。</span>
      </div>

      <!-- フォルダ一覧 -->
      <div id="folders" class="folders hidden"></div>
    </section>
  </main>

  <footer class="container footer">
    <span>&copy; <span id="year"></span> Kensa</span>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    /* =======================
       1) KONFIGURASI DATA
       ======================= */
    const PASSWORD = "kensa2025"; // ubah kalau perlu

    // Struktur: customer -> subfolders (axis) -> links (label + url)
    const DATA = [
      {
        customer: "オークマ",
        folders: [
          {
            name: "Y軸",
            links: [
              { label: "2825-20", url: "https://wahyu0312-source.github.io/okuma46/", tag:"MB-46V Y軸" },
              { label: "2835-20",    url: "https://wahyu0312-source.github.io/mb56/",    tag:"MB-56V Y軸" },
              { label: "2823-20",  url: "https://wahyu0312-source.github.io/mb66v/", tag:"MB-66V Y軸" },
            ]
          },
          {
            name: "X軸",
            links: [
              { label: "330380V", url: "https://wahyu0312-source.github.io/330380v/", tag:"MB-80V X" },
              { label: "330580V", url: "https://wahyu0312-source.github.io/330580v/", tag:"MB-80V X" }
            ]
          },
          {
            name: "Z軸",
            links: [
              { label: "330580V", url: "https://wahyu0312-source.github.io/330580v/" }
            ]
          }
        ]
      },
      // 例: 追加の顧客
      {
        customer: "中村留",
        folders: [
          { name:"Y軸", links: [] },
          { name:"X軸", links: [] },
          { name:"Z軸", links: [] }
        ]
      }
    ];

    /* =======================
       2) RENDER & INTERAKSI
       ======================= */
    const elFolders = document.getElementById("folders");
    const elSearch  = document.getElementById("search");

    function folderTemplate(idx, item){
      const count = item.folders.reduce((n,f)=> n + (f.links?.length||0), 0);
      return `
        <div class="folder" data-index="${idx}">
          <div class="folder-head" data-toggle>
            <div class="folder-title">
              <span class="ico caret">▶</span>
              <span>${item.customer}</span>
              <span class="folder-badge">${count} 件</span>
            </div>
            <div class="muted">クリックで展開</div>
          </div>
          <div class="folder-body hidden">
            <div class="subgrid">
              ${item.folders.map(sf => `
                <div class="subfolder">
                  <div class="subfolder-head">${sf.name}</div>
                  <div class="links">
                    ${
                      (sf.links && sf.links.length)
                        ? sf.links.map(l => `
                          <a class="link" href="${l.url}" target="_blank">
                            <span>${l.label}</span>
                            <span class="tag">${l.tag||"開く"}</span>
                          </a>`).join("")
                        : `<div class="muted" style="padding:8px 10px">リンクなし</div>`
                    }
                  </div>
                </div>
              `).join("")}
            </div>
          </div>
        </div>`;
    }

    function renderList(list){
      elFolders.innerHTML = list.map((it,i)=>folderTemplate(i,it)).join("");
      // toggle buka/tutup folder
      elFolders.querySelectorAll("[data-toggle]").forEach(head => {
        head.addEventListener("click", () => {
          const body  = head.parentElement.querySelector(".folder-body");
          const caret = head.querySelector(".caret");
          body.classList.toggle("hidden");
          caret.classList.toggle("rot");
        });
      });
    }

    function filterList(q){
      const s = q.trim().toLowerCase();
      if (!s) return DATA;
      return DATA.map(c => ({
        ...c,
        folders: c.folders.map(sf => ({
          ...sf,
          links: (sf.links||[]).filter(l =>
            [c.customer, sf.name, l.label, l.tag].join(" ").toLowerCase().includes(s))
        }))
      })).filter(c => c.folders.some(sf => (sf.links||[]).length > 0));
    }

    // actions
    document.getElementById("expandAll").addEventListener("click", () => {
      elFolders.querySelectorAll(".folder-body").forEach(b => b.classList.remove("hidden"));
      elFolders.querySelectorAll(".caret").forEach(c => c.classList.add("rot"));
    });
    document.getElementById("collapseAll").addEventListener("click", () => {
      elFolders.querySelectorAll(".folder-body").forEach(b => b.classList.add("hidden"));
      elFolders.querySelectorAll(".caret").forEach(c => c.classList.remove("rot"));
    });
    elSearch.addEventListener("input", (e) => renderList(filterList(e.target.value)));

    // password
    const lock  = document.getElementById("lock");
    const msg   = document.getElementById("msg");
    document.getElementById("unlock").addEventListener("click", () => {
      const v = document.getElementById("pwd").value;
      if (v !== PASSWORD){ msg.textContent = "パスワードが違います"; return; }
      sessionStorage.setItem("kensa_unlocked","1");
      lock.classList.add("hidden");
      elFolders.classList.remove("hidden");
      renderList(DATA);
    });
    // jika sudah unlock di tab ini
    if (sessionStorage.getItem("kensa_unlocked")==="1"){
      lock.classList.add("hidden");
      elFolders.classList.remove("hidden");
      renderList(DATA);
    }
  </script>
</body>
</html>


